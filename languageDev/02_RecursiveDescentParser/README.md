# JavaScript Parser and AST Generator

This project is a **JavaScript parser** designed to convert JavaScript code into an **Abstract Syntax Tree (AST)**. It supports common language constructs like **variable declarations**, **control structures**, **function definitions**, **classes**, and more. This parser is structured using **tokenization**, **parsing**, and **AST generation** techniques, offering a flexible foundation for further extensions like code analysis, optimization, or even transformation.

---

## Features

- **Tokenization**: The parser uses a tokenizer to break down JavaScript code into individual tokens based on predefined patterns (such as keywords, operators, and literals).
  
- **Abstract Syntax Tree (AST)**: The parser produces an AST representation of JavaScript code, providing a structured, hierarchical representation of the code's syntax.

- **Support for Core JavaScript Constructs**:
  - **Variable Declarations** (`let`, `const`, etc.)
  - **Control Structures** (if, else, while, do-while, for)
  - **Functions and Methods** (`def`, `return`)
  - **Classes** with support for **Inheritance** (`class`, `extends`, `super`)
  - **Expressions** (assignment, binary, logical, and unary operators)
  - **Literals** (strings, numbers, booleans, null)
  
- **Error Handling**: Detailed error messages when encountering unexpected tokens in the input, helping with debugging and analysis.

- **Command-Line Interface (CLI)**: Easily parse JavaScript code directly from the command line, either from an inline expression or from a file.

- **Extensibility**: The parser is structured to allow easy additions of new JavaScript constructs or token types.

- **Tests**: A comprehensive test suite covering various language features ensures that the parser behaves correctly for a wide range of JavaScript code.

---

## Project Architecture

The project follows a modular design pattern that separates concerns into distinct components. Here's a breakdown of the architecture:

### 1. **Tokenizer (Lexical Analysis)** - `Tokenizer.js`

- **Purpose**: The tokenizer is responsible for scanning the input code and breaking it into individual tokens.
- **How it works**: 
  - It uses regular expressions defined in the **Spec** to match various JavaScript constructs, such as keywords, operators, and punctuation.
  - It reads the input string one character at a time and tries to match it against each regex pattern defined in the **Spec.js** file.
  - The tokenizer advances the cursor as it finds matching patterns and returns the corresponding tokens.
  
- **Output**: A sequence of tokens that represent the lexical structure of the input code (e.g., keywords, variables, operators, literals).

### 2. **Parser (Syntactic Analysis)** - `Parser.js`

- **Purpose**: The parser takes the sequence of tokens generated by the tokenizer and generates an Abstract Syntax Tree (AST).
- **How it works**:
  - The parser processes tokens one by one, applying grammar rules to match and reduce sequences of tokens into higher-level language constructs.
  - For example, it recognizes when tokens form an **if statement**, a **function declaration**, or an **expression**.
  - The parser is responsible for handling various constructs such as assignments, loops, conditionals, and function definitions, creating appropriate nodes in the AST.
  
- **Output**: An Abstract Syntax Tree (AST) that represents the hierarchical structure of the code, where each node corresponds to a language construct (e.g., a variable, expression, statement).

### 3. **Factories (AST Node Creation)** - `Factories.js`

- **Purpose**: Factories are utility functions used to create specific types of AST nodes.
- **How it works**:
  - The `DefaultFactory` and `SExpressionFactory` provide two different styles of AST node creation:
    - **DefaultFactory**: Creates AST nodes with detailed properties (e.g., node type, body, expressions, etc.).
    - **SExpressionFactory**: Creates a more compact and simple representation of the AST using nested arrays (similar to S-expressions).
  
- **Output**: AST nodes that represent different parts of the program, such as expressions, statements, variables, or classes.

### 4. **Spec (Token Specifications)** - `Spec.js`

- **Purpose**: The **Spec** defines the regular expressions used by the tokenizer to identify different types of tokens (keywords, operators, literals, etc.).
- **How it works**:
  - The `Spec.js` file contains an array of regular expressions and their corresponding token types (e.g., `let`, `if`, `class`).
  - The tokenizer uses these patterns to identify and return the correct token type when it matches a portion of the input string.
  
- **Output**: A set of token types, which are used by the tokenizer and parser to identify various components in the JavaScript code.

### 5. **Command-Line Interface (CLI)** - `bin/executable.js`

- **Purpose**: This file allows users to run the parser from the command line.
- **How it works**:
  - The CLI accepts two modes:
    - **-e**: Parse an expression passed directly in the command line.
    - **-f**: Parse a JavaScript file specified by its path.
  - The result is the generated AST, printed to the console.
  
- **Output**: The AST is printed as a formatted JSON object.

### 6. **Test Suite** - `tests/`

- **Purpose**: A comprehensive suite of tests ensures the parser works as expected.
- **How it works**:
  - The test files in the `tests/` directory cover different language features like assignment, functions, control structures, etc.
  - Tests verify that the parser correctly generates ASTs for various JavaScript code examples.
  
- **Output**: Results from running the tests, confirming the correctness of the parser.

---

## Usage

### 1. **Command-Line Usage**

#### **Parsing an Expression**

You can parse a single JavaScript expression by passing it directly to the command line:

```bash
node bin/executable.js -e "let x = 5 + 10;"
```

This will output the AST for the expression `let x = 5 + 10;`.

#### **Parsing a File**

You can also parse an entire JavaScript file by providing the path to the file:

```bash
node bin/executable.js -f path/to/your/file.js
```

This will read the contents of `file.js` and output its AST.

### 2. **Programmatic Usage**

If you'd prefer to use the parser within your own code, you can import and use the `Parser` class directly:

```javascript
const { Parser } = require('./src/Parser');
const parser = new Parser();
const ast = parser.parse('let x = 5 + 10;');
console.log(JSON.stringify(ast, null, 2));
```

## Running Tests

To run the tests, use the following command:

```bash
node tests/run.js
```

This will run all tests and output the results, ensuring that the parser is functioning correctly.

---

## Resources
[Dmitry Soshnikov](http://dmitrysoshnikov.com/).